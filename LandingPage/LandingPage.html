<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoGraph</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="LandingPage.css">
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg fixed-top">
    <div class="container">
        <a class="navbar-brand" href="#"><i class="fas fa-car"></i> AutoGraph</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav me-auto">
            <li class="nav-item"><a class="nav-link" href="#home">Home</a></li>
            <li class="nav-item"><a class="nav-link" href="#about">About</a></li>
            <li class="nav-item"><a class="nav-link" href="#featured-vehicles">Cars</a></li>
            <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
        </ul>
        <button class="btn btn-auth" data-bs-toggle="modal" data-bs-target="#loginModal">
            <i class="fas fa-user"></i> Login
        </button>
        </div>
    </div>
    </nav>

    <!-- Login Modal -->
<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" style="max-width: 460px;">
    <div class="modal-content p-0" style="background: transparent; box-shadow: none; border: none;">
      <iframe 
        id="loginFrame"
        src="../LoginPage/loginPage.php"
        style="
          width: 100%;
          height: 630px;
          border: none;
          border-radius: 16px;
          overflow: hidden;
          background: transparent;
          display: block;
        ">
      </iframe>
    </div>
  </div>
</div>


    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-slideshow">
            <!-- Slide 1 -->
            <div class="hero-slide active" data-bg="url('images/car1.jpg') center/cover no-repeat">
                <div class="container">
                    <div class="row align-items-center">
                        <div class="col-lg-6">
                            <div class="hero-content fade-in">
                                <h1>Drive Your Dreams</h1>
                                <p>Discover premium vehicles with unmatched quality and service. Your perfect car awaits at Elite Motors.</p>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="text-center slide-in-right">
                                <img src="/Pictures/Carmax_logo.jpg" alt="Logo" class="img-fluid rounded shadow">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Slide 2 -->
             <div class="hero-slide" data-bg="url('images/car1.jpg') center/cover no-repeat">
                <div class="container">
                    <div class="row align-items-center">
                        <div class="col-lg-6">
                            <div class="hero-content fade-in">
                                <h1>Drive Your Dreams</h1>
                                <p>Discover premium vehicles with unmatched quality and service. Your perfect car awaits at Elite Motors.</p>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="text-center slide-in-right">
                                <img src="/Pictures/Peep.jpg" alt="Car" class="img-fluid rounded shadow">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Slide 3 -->
             <div class="hero-slide" data-bg="url('images/car1.jpg') center/cover no-repeat">
                <div class="container">
                    <div class="row align-items-center">
                        <div class="col-lg-6">
                            <div class="hero-content fade-in">
                                <h1>Drive Your Dreams</h1>
                                <p>Discover premium vehicles with unmatched quality and service. Your perfect car awaits at Elite Motors.</p>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="text-center slide-in-right">
                                <img src="/Pictures/peep2.jpg" alt="Car" class="img-fluid rounded shadow">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Slide 4 -->
             <div class="hero-slide" data-bg="url('images/car1.jpg') center/cover no-repeat">
                <div class="container">
                    <div class="row align-items-center">
                        <div class="col-lg-6">
                            <div class="hero-content fade-in">
                                <h1>Drive Your Dreams</h1>
                                <p>Discover premium vehicles with unmatched quality and service. Your perfect car awaits at Elite Motors.</p>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="text-center slide-in-right">
                                <img src="/Pictures/peep3.jpg" alt="Car" class="img-fluid rounded shadow">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slideshow Controls -->
        <div class="slideshow-controls">
            <button class="slide-nav prev" onclick="changeSlide(-1)">
                <i class="fas fa-chevron-left"></i>
            </button>
            <button class="slide-nav next" onclick="changeSlide(1)">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>

        <!-- Slide Indicators -->
        <div class="slide-indicators">
            <button class="indicator active" onclick="currentSlide(1)"></button>
            <button class="indicator" onclick="currentSlide(2)"></button>
            <button class="indicator" onclick="currentSlide(3)"></button>
            <button class="indicator" onclick="currentSlide(4)"></button>
        </div>
    </section>

   <!-- Featured Vehicles Section -->
   <section id="featured-vehicles" class="section-padding text-center">
      <div class="container">
        <h2 class="section-title">Featured Vehicles</h2>
        
        <!-- Spotlight Vehicle -->
        <div id="spotlightContainer" class="spotlight-container">
          <!-- Spotlight vehicle will be loaded here -->
        </div>

        <!-- Vehicle Controls -->
        <div class="vehicles-controls">
          <div class="vehicles-search">
            <input type="text" id="searchInput" placeholder="Search by model, year, or color..." class="form-control">
            <select id="sortSelect" class="form-select">
              <option value="default">Sort by</option>
              <option value="price-low">Price: Low to High</option>
              <option value="price-high">Price: High to Low</option>
              <option value="year-new">Year: Newest First</option>
              <option value="year-old">Year: Oldest First</option>
            </select>
          </div>
          <div class="vehicles-view-toggle">
            <button class="view-btn active" id="gridViewBtn" onclick="setViewMode('grid')">
              <i class="fas fa-th"></i>
            </button>
            <button class="view-btn" id="listViewBtn" onclick="setViewMode('list')">
              <i class="fas fa-list"></i>
            </button>
          </div>
        </div>

        <!-- Vehicles Grid -->
        <div id="vehiclesContainer" class="grid-view">
        </div>

        <!-- Pagination -->
        <div class="pagination-container">
          <button class="pagination-btn" id="prevBtn" onclick="changePage(-1)">
            <i class="fas fa-chevron-left"></i> Previous
          </button>
          <span class="pagination-info" id="pageInfo"></span>
          <button class="pagination-btn" id="nextBtn" onclick="changePage(1)">
            Next <i class="fas fa-chevron-right"></i>
          </button>
        </div>
      </div>
    </section>

     <!-- About Section -->
    <section id="about" class="section-padding about-section">
    <div class="container">
        <h2 class="section-title fade-in text-center mb-5">Carmax</h2>

        <!-- Row 1: History -->
        <div class="row align-items-center mb-5">
        <div class="col-md-6 slide-in-left">
           
            <div class="about-icon mb-3"><i class="fas fa-history"></i></div>
            <h4 class="mb-3">Our History</h4>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Voluptate distinctio laudantium similique tempora architecto, esse ratione modi a. Odio dolore minus illo dolor, quidem fugiat ipsam dolorem!</p>
            
        </div>
        <div class="col-md-6 slide-in-right">
            <img src="/Pictures/Carmaxold.jpg" alt="Our History" class="img-fluid rounded-4 shadow-lg">
        </div>
        </div>

        <!-- Row 2: Mission -->
        <div class="row align-items-center flex-md-row-reverse mb-5">
        <div class="col-md-6 slide-in-right">
          
            <div class="about-icon mb-3"><i class="fas fa-bullseye"></i></div>
            <h4 class="mb-3">Our Mission</h4>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Cupiditate laboriosam odit sunt veritatis corporis suscipit. Dolorem deserunt eveniet ex fugiat blanditiis eligendi similique odio? Voluptatum quidem illum ut!</p>
           
        </div>
        <div class="col-md-6 slide-in-left">
            <img src="/Pictures/Mission.jpg" alt="Our Mission" class="img-fluid rounded-4 shadow-lg">
        </div>
        </div>

        <!-- Row 3: Vision -->
        <div class="row align-items-center mb-5">
        <div class="col-md-6 slide-in-left">

            <div class="about-icon mb-3"><i class="fas fa-eye"></i></div>
            <h4 class="mb-3">Our Vision</h4>
            <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Inventore, nihil natus asperiores fuga blanditiis est corporis aliquid explicabo harum nulla dolores impedit modi perspiciatis? Facere dolore repellat ipsam temporibus.</p>
        </div>
        <div class="col-md-6 slide-in-right">
            <img src="/Pictures/Vision.jpg" alt="Our Vision" class="img-fluid rounded-4 shadow-lg">
        </div>
        </div>

    </div>
    </section>

    <!-- Footer -->
    <footer class="footer" id="contact">
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <h5><i class="fas fa-car"></i> Autograph</h5>
                    <p>Your trusted partner in finding quality pre-owned vehicles.</p>
                </div>
                <div class="col-md-6">
                    <h5>Contact Info</h5>
                    <p><i class="fas fa-map-marker-alt"></i> 83F7+74H, Carmona, 4116 Cavite</p>
                    <p><i class="fas fa-phone"></i> (555) 123-4567</p>
                    <p><i class="fas fa-envelope"></i> info@autograph.com</p>
                </div>
            </div>
            <hr style="margin: 2rem 0 1rem; border-color: #444;">
            <div class="text-center">
                <p>&copy; 2025 Autograph. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Car Details Modal -->
    <div class="modal fade" id="carDetailsModal" tabindex="-1" aria-labelledby="carDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="carDetailsModalLabel"></h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal">X</button>
                </div>
                
                <div class="modal-body">
                    <!-- Image Gallery -->
                    <div id="carImageGallery" class="mb-3">
                        <div id="carouselImages" class="carousel slide" data-bs-ride="carousel">
                            <div class="carousel-inner" id="carouselInner"></div>
                            <button class="carousel-control-prev" type="button" data-bs-target="#carouselImages" data-bs-slide="prev">
                                <span class="carousel-control-prev-icon"></span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#carouselImages" data-bs-slide="next">
                                <span class="carousel-control-next-icon"></span>
                            </button>
                        </div>
                    </div>

                    <!-- Selling Price -->
                    <div class="alert alert-success text-center mb-4" style="font-size: 1.5rem; font-weight: bold;">
                        <i class="fas fa-tag"></i> SELLING PRICE: <span id="carSellingPrice"></span>
                    </div>

                    <!-- Vehicle Details -->
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <p><strong>Plate Number:</strong> <span id="carPlateNumber"></span></p>
                            <p><strong>Year:</strong> <span id="carYear"></span></p>
                            <p><strong>Color:</strong> <span id="carColor"></span></p>
                        </div>
                        <div class="col-md-6">
                            <p><strong>Spare Tires:</strong> <span id="carSpareTires"></span></p>
                            <p><strong>Complete Tools:</strong> <span id="carCompleteTools"></span></p>
                            <p><strong>Original Plate:</strong> <span id="carOriginalPlate"></span></p>
                            <p><strong>Complete Documents:</strong> <span id="carCompleteDocuments"></span></p>
                        </div>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
    <script>
        // Global variables
        let allVehicles = [];
        let filteredVehicles = [];
        let currentPage = 1;
        const vehiclesPerPage = 6;
        let currentViewMode = 'grid';

        // Load Released Vehicles
        async function loadVehicles() {
            try {
                const response = await fetch('../AcquisitionPage/getReleasedVehicle.php');
                const data = await response.json();
                
                if (data.success && data.vehicles.length > 0) {
                    allVehicles = data.vehicles;
                    filteredVehicles = [...allVehicles];
                    
                    // Load spotlight vehicle (first vehicle)
                    loadSpotlight();
                    
                    // Display vehicles
                    displayVehicles();
                } else {
                    document.getElementById('vehiclesContainer').innerHTML = 
                        '<div class="col-12 text-center"><p>No vehicles available at the moment. Check back soon!</p></div>';
                }
            } catch (error) {
                console.error('Error loading vehicles:', error);
                document.getElementById('vehiclesContainer').innerHTML = 
                    '<div class="col-12 text-center"><p class="text-danger">Error loading vehicles. Please try again later.</p></div>';
            }
        }

        // Load Spotlight Vehicle
        function loadSpotlight() {
            if (allVehicles.length === 0) return;
            
            const spotlightVehicle = allVehicles[0];
            const photoPath = spotlightVehicle.wholecar_photo 
                ? `../uploads/${spotlightVehicle.wholecar_photo}` 
                : '/Pictures/placeholder-car.jpg';
            
            const sellingPrice = spotlightVehicle.selling_price 
                ? `₱${parseFloat(spotlightVehicle.selling_price).toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,')}` 
                : 'Price on Request';
            
            const spotlightHTML = `
                <span class="spotlight-badge"><i class="fas fa-star"></i> Featured</span>
                <div class="spotlight-content">
                    <div class="spotlight-image">
                        <img src="${photoPath}" alt="${spotlightVehicle.model}">
                    </div>
                    <div class="spotlight-info">
                        <h3>${spotlightVehicle.model} ${spotlightVehicle.year}</h3>
                        <p class="spotlight-price">${sellingPrice}</p>
                        <div class="spotlight-details">
                            <div class="spotlight-detail-item">
                                <i class="fas fa-calendar"></i>
                                <span>${spotlightVehicle.year}</span>
                            </div>
                            <div class="spotlight-detail-item">
                                <i class="fas fa-palette"></i>
                                <span>${spotlightVehicle.color}</span>
                            </div>
                            <div class="spotlight-detail-item">
                                <i class="fas fa-id-card"></i>
                                <span>${spotlightVehicle.masked_plate}</span>
                            </div>
                            <div class="spotlight-detail-item">
                                <i class="fas fa-check-circle"></i>
                                <span>${spotlightVehicle.complete_documents}</span>
                            </div>
                        </div>
                        <div class="spotlight-actions">
                            <button class="btn btn-primary-custom" onclick='showVehicleDetails(${JSON.stringify(spotlightVehicle).replace(/'/g, "&apos;")})'>
                                <i class="fas fa-info-circle"></i> View Full Details
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('spotlightContainer').innerHTML = spotlightHTML;
        }

        // Display Vehicles with Pagination
        function displayVehicles() {
            const container = document.getElementById('vehiclesContainer');
            const start = (currentPage - 1) * vehiclesPerPage;
            const end = start + vehiclesPerPage;
            const vehiclesToShow = filteredVehicles.slice(start, end);
            
            if (vehiclesToShow.length === 0) {
                container.innerHTML = '<div class="col-12 text-center"><p>No vehicles found matching your criteria.</p></div>';
                updatePagination();
                return;
            }
            
            container.innerHTML = '';
            
            vehiclesToShow.forEach(vehicle => {
                const photoPath = vehicle.wholecar_photo 
                    ? `../uploads/${vehicle.wholecar_photo}` 
                    : '/Pictures/placeholder-car.jpg';
                
                const sellingPrice = vehicle.selling_price 
                    ? `₱${parseFloat(vehicle.selling_price).toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,')}` 
                    : 'Price on Request';
                
                const cardHTML = `
                    <div class="car-card fade-in">
                        <div class="car-image">
                            <img src="${photoPath}" alt="${vehicle.model}" class="img-fluid">
                        </div>
                        <div class="car-info">
                            <h5>${vehicle.model} ${vehicle.year}</h5>
                            <p class="text-muted">${vehicle.color}</p>
                            <p class="text-muted"><small>Plate: ${vehicle.masked_plate}</small></p>
                            <div class="d-flex justify-content-between align-items-center">
                                <span class="car-price">${sellingPrice}</span>
                                <button class="btn btn-sm btn-view-details"
                                    onclick='showVehicleDetails(${JSON.stringify(vehicle).replace(/'/g, "&apos;")})'>
                                    View Details
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                
                container.insertAdjacentHTML('beforeend', cardHTML);
            });
            
            updatePagination();
        }

        // Update Pagination
        function updatePagination() {
            const totalPages = Math.ceil(filteredVehicles.length / vehiclesPerPage);
            document.getElementById('pageInfo').textContent = `Page ${currentPage} of ${totalPages}`;
            document.getElementById('prevBtn').disabled = currentPage === 1;
            document.getElementById('nextBtn').disabled = currentPage === totalPages || totalPages === 0;
        }

        // Change Page
        function changePage(direction) {
            const totalPages = Math.ceil(filteredVehicles.length / vehiclesPerPage);
            currentPage += direction;
            if (currentPage < 1) currentPage = 1;
            if (currentPage > totalPages) currentPage = totalPages;
            displayVehicles();
            document.getElementById('featured-vehicles').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // Set View Mode
        function setViewMode(mode) {
            currentViewMode = mode;
            const container = document.getElementById('vehiclesContainer');
            const gridBtn = document.getElementById('gridViewBtn');
            const listBtn = document.getElementById('listViewBtn');
            
            if (mode === 'grid') {
                container.classList.remove('list-view');
                container.classList.add('grid-view');
                gridBtn.classList.add('active');
                listBtn.classList.remove('active');
            } else {
                container.classList.remove('grid-view');
                container.classList.add('list-view');
                listBtn.classList.add('active');
                gridBtn.classList.remove('active');
            }
        }

        // Search and Filter
        document.getElementById('searchInput').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            filteredVehicles = allVehicles.filter(vehicle => 
                vehicle.model.toLowerCase().includes(searchTerm) ||
                vehicle.year.toString().includes(searchTerm) ||
                vehicle.color.toLowerCase().includes(searchTerm)
            );
            currentPage = 1;
            displayVehicles();
        });

        // Sort Vehicles
        document.getElementById('sortSelect').addEventListener('change', function(e) {
            const sortValue = e.target.value;
            
            switch(sortValue) {
                case 'price-low':
                    filteredVehicles.sort((a, b) => parseFloat(a.selling_price || 0) - parseFloat(b.selling_price || 0));
                    break;
                case 'price-high':
                    filteredVehicles.sort((a, b) => parseFloat(b.selling_price || 0) - parseFloat(a.selling_price || 0));
                    break;
                case 'year-new':
                    filteredVehicles.sort((a, b) => b.year - a.year);
                    break;
                case 'year-old':
                    filteredVehicles.sort((a, b) => a.year - b.year);
                    break;
                default:
                    filteredVehicles = [...allVehicles];
            }
            
            currentPage = 1;
            displayVehicles();
        });

        function showVehicleDetails(vehicle) {
            // Set modal title
            document.getElementById('carDetailsModalLabel').textContent = 
                `${vehicle.model} ${vehicle.year}`;
            
            // Set selling price
            const sellingPrice = vehicle.selling_price 
                ? `₱${parseFloat(vehicle.selling_price).toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,')}` 
                : 'Contact us for pricing';
            document.getElementById('carSellingPrice').textContent = sellingPrice;
            
            // Set basic details
            document.getElementById('carPlateNumber').textContent = vehicle.masked_plate;
            document.getElementById('carYear').textContent = vehicle.year;
            document.getElementById('carColor').textContent = vehicle.color;
            document.getElementById('carSpareTires').textContent = vehicle.spare_tires;
            document.getElementById('carCompleteTools').textContent = vehicle.complete_tools;
            document.getElementById('carOriginalPlate').textContent = vehicle.original_plate;
            document.getElementById('carCompleteDocuments').textContent = vehicle.complete_documents;
            
            // Build image carousel
            const carouselInner = document.getElementById('carouselInner');
            carouselInner.innerHTML = '';
            
            const photos = [
                { path: vehicle.wholecar_photo, label: 'Whole Car' },
                { path: vehicle.dashboard_photo, label: 'Dashboard' },
                { path: vehicle.hood_photo, label: 'Hood' },
                { path: vehicle.interior_photo, label: 'Interior' },
                { path: vehicle.exterior_photo, label: 'Exterior' },
                { path: vehicle.trunk_photo, label: 'Trunk' }
            ].filter(p => p.path);
            
            photos.forEach((photo, index) => {
                const item = document.createElement('div');
                item.className = `carousel-item ${index === 0 ? 'active' : ''}`;
                item.innerHTML = `
                    <img src="../uploads/${photo.path}" class="d-block w-100 rounded" alt="${photo.label}">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>${photo.label}</h5>
                    </div>
                `;
                carouselInner.appendChild(item);
            });
            
            // Show modal
            const modal = new bootstrap.Modal(document.getElementById('carDetailsModal'));
            modal.show();
        }

        // Slideshow functionality
        let slideIndex = 0;
        const slides = document.querySelectorAll(".hero-slide");
        const indicators = document.querySelectorAll(".indicator");

        function showSlide(index) {
            slides.forEach((slide, i) => {
                slide.classList.remove("active");
                if (indicators[i]) indicators[i].classList.remove("active");
                if (i === index) {
                    slide.classList.add("active");
                    if (indicators[i]) indicators[i].classList.add("active");
                }
            });
            slideIndex = index;
        }

        function changeSlide(n) {
            let newIndex = (slideIndex + n + slides.length) % slides.length;
            showSlide(newIndex);
        }

        function currentSlide(n) {
            showSlide(n - 1);
        }

        // Smooth scrolling
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });

        // Animation on scroll
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver(function(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.animationDelay = '0s';
                    entry.target.style.animationPlayState = 'running';
                }
            });
        }, observerOptions);

        document.querySelectorAll('.fade-in, .slide-in-left, .slide-in-right').forEach(el => {
            el.style.animationPlayState = 'paused';
            observer.observe(el);
        });

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadVehicles();
            showSlide(0);
            
            // Auto-slide every 5 seconds
            setInterval(() => changeSlide(1), 5000);
        });
    </script>
</body>
</html>