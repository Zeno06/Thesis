<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoGraph</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="LandingPage.css">
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg fixed-top">
    <div class="container">
        <a class="navbar-brand" href="#home"><i class="fas fa-car"></i> AutoGraph</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
        <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav me-auto">
            <li class="nav-item"><a class="nav-link" href="#home">Home</a></li>
            <li class="nav-item"><a class="nav-link" href="#about">About</a></li>
            <li class="nav-item"><a class="nav-link" href="#featured-vehicles">Cars</a></li>
            <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
        </ul>
        <button class="btn btn-auth" data-bs-toggle="modal" data-bs-target="#loginModal">
            <i class="fas fa-user"></i> Login
        </button>
        </div>
    </div>
    </nav>

    <!-- Login Modal -->
<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" style="max-width: 460px;">
    <div class="modal-content p-0" style="background: transparent; box-shadow: none; border: none;">
      <iframe 
        id="loginFrame"
        src="../LoginPage/loginPage.php"
        style="
          width: 100%;
          height: 630px;
          border: none;
          border-radius: 16px;
          overflow: hidden;
          background: transparent;
          display: block;
        ">
      </iframe>
    </div>
  </div>
</div>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-slideshow">
            <!-- Slide 1 -->
            <div class="hero-slide active" data-bg="url('images/car1.jpg') center/cover no-repeat">
                <div class="container">
                    <div class="row align-items-center">
                        <div class="col-lg-6">
                            <div class="hero-content fade-in">
                                <h1>Drive Your Dreams</h1>
                                <p>Discover premium vehicles with unmatched quality and service. Your perfect car awaits at Elite Motors.</p>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="text-center slide-in-right">
                                <img src="/Pictures/Carmax_logo.jpg" alt="Logo" class="img-fluid rounded shadow">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Slide 2 -->
             <div class="hero-slide" data-bg="url('images/car1.jpg') center/cover no-repeat">
                <div class="container">
                    <div class="row align-items-center">
                        <div class="col-lg-6">
                            <div class="hero-content fade-in">
                                <h1>Drive Your Dreams</h1>
                                <p>Discover premium vehicles with unmatched quality and service. Your perfect car awaits at Elite Motors.</p>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="text-center slide-in-right">
                                <img src="/Pictures/Peep.jpg" alt="Car" class="img-fluid rounded shadow">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Slide 3 -->
             <div class="hero-slide" data-bg="url('images/car1.jpg') center/cover no-repeat">
                <div class="container">
                    <div class="row align-items-center">
                        <div class="col-lg-6">
                            <div class="hero-content fade-in">
                                <h1>Drive Your Dreams</h1>
                                <p>Discover premium vehicles with unmatched quality and service. Your perfect car awaits at Elite Motors.</p>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="text-center slide-in-right">
                                <img src="/Pictures/peep2.jpg" alt="Car" class="img-fluid rounded shadow">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Slide 4 -->
             <div class="hero-slide" data-bg="url('images/car1.jpg') center/cover no-repeat">
                <div class="container">
                    <div class="row align-items-center">
                        <div class="col-lg-6">
                            <div class="hero-content fade-in">
                                <h1>Drive Your Dreams</h1>
                                <p>Discover premium vehicles with unmatched quality and service. Your perfect car awaits at Elite Motors.</p>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="text-center slide-in-right">
                                <img src="/Pictures/peep3.jpg" alt="Car" class="img-fluid rounded shadow">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slideshow Controls -->
        <div class="slideshow-controls">
            <button class="slide-nav prev" onclick="changeSlide(-1)">
                <i class="fas fa-chevron-left"></i>
            </button>
            <button class="slide-nav next" onclick="changeSlide(1)">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>

        <!-- Slide Indicators -->
        <div class="slide-indicators">
            <button class="indicator active" onclick="currentSlide(1)"></button>
            <button class="indicator" onclick="currentSlide(2)"></button>
            <button class="indicator" onclick="currentSlide(3)"></button>
            <button class="indicator" onclick="currentSlide(4)"></button>
        </div>
    </section>

   <!-- Featured Vehicles Section -->
   <section id="featured-vehicles" class="section-padding text-center">
      <div class="container">
        <h2 class="section-title">Featured Vehicles</h2>
        
        <!-- Spotlight Vehicle -->
        <div id="spotlightContainer" class="spotlight-container">
          <!-- Spotlight vehicle will be loaded here -->
        </div>

        <!-- Vehicle Controls -->
        <div class="vehicles-controls">
          <div class="vehicles-search">
            <input type="text" id="searchInput" placeholder="Search by model, year, or color..." class="form-control">
            <select id="sortSelect" class="form-select">
              <option value="default">Sort by</option>
              <option value="price-low">Price: Low to High</option>
              <option value="price-high">Price: High to Low</option>
              <option value="year-new">Year: Newest First</option>
              <option value="year-old">Year: Oldest First</option>
            </select>
          </div>
          <div class="vehicles-view-toggle">
            <button class="view-btn active" id="gridViewBtn" onclick="setViewMode('grid')">
              <i class="fas fa-th"></i>
            </button>
            <button class="view-btn" id="listViewBtn" onclick="setViewMode('list')">
              <i class="fas fa-list"></i>
            </button>
          </div>
        </div>

        <!-- Vehicles Grid -->
        <div id="vehiclesContainer" class="grid-view">
        </div>

        <!-- Pagination -->
        <div class="pagination-container">
          <button class="pagination-btn" id="prevBtn" onclick="changePage(-1)">
            <i class="fas fa-chevron-left"></i> Previous
          </button>
          <span class="pagination-info" id="pageInfo"></span>
          <button class="pagination-btn" id="nextBtn" onclick="changePage(1)">
            Next <i class="fas fa-chevron-right"></i>
          </button>
        </div>
      </div>
    </section>

<section id="about" class="section-padding about-section">
    <div class="container">
        <h2 class="section-title fade-in text-center mb-5">Carmax</h2>

        <!-- Row 1 -->
        <div class="row align-items-center mb-5">
            <div class="col-md-6 slide-in-left text-center">
                <div class="about-icon mb-3 mx-auto d-flex align-items-center justify-content-center">
                    <i class="fas fa-fist-raised"></i>
                </div>
                <h4 class="mb-3">TENACITY</h4>
                <p>Exhibit determination in reaching goals and consistently meeting or exceeding expectations.
                    <br> DON'T GIVE UP — Focus on continuous improvement; don't consider failure an option.
                </p>
            </div>

            <div class="col-md-6 slide-in-right">
                <img src="/Pictures/tenacity.jpg" alt="Our History" class="img-fluid rounded-4 shadow-lg">
            </div>
        </div>

        <!-- Row 2 -->
        <div class="row align-items-center flex-md-row-reverse mb-5">
            <div class="col-md-6 slide-in-right text-center">
                <div class="about-icon mb-3 mx-auto d-flex align-items-center justify-content-center">
                    <i class="fas fa-handshake"></i>
                </div>
                <h4 class="mb-3">TRUSTWORTHY</h4>
                <p>
                    Behave ethically, safely, honestly and lawfully. Take pride in being fair and knowledgeable,
                    and build integrity in every situation.
                </p>
            </div>

            <div class="col-md-6 slide-in-left">
                <img src="/Pictures/trustworthy.jpg" alt="Our Mission" class="img-fluid rounded-4 shadow-lg">
            </div>
        </div>

        <!-- Row 3 -->
        <div class="row align-items-center mb-5">
            <div class="col-md-6 slide-in-left text-center">
                <div class="about-icon mb-3 mx-auto d-flex align-items-center justify-content-center">
                    <i class="fas fa-users"></i>
                </div>
                <h4 class="mb-3">TEAMWORK</h4>
                <p>
                    Work collaboratively and harmoniously with every member of the company toward common goals.
                    Treat people with respect and dignity. Commit to the company where personal wants and needs
                    become secondary.
                </p>
            </div>

            <div class="col-md-6 slide-in-right">
                <img src="/Pictures/teamwork.jpeg" alt="Our Vision" class="img-fluid rounded-4 shadow-lg">
            </div>
        </div>
    </div>
</section>


    <!-- Footer -->
    <footer class="footer" id="contact">
        <div class="container">
            <div class="row">
                <div class="col-md-5">
                    <h5><i class="fas fa-car"></i> Autograph</h5>
                    <p>We carefully source, inspect, and recondition all our vehicles to maintain the high quality pre-owned cars we offer you. 
                        Our 30-day engine and transmission warranty is the proof of our confidence in your purchase. We save you money, time, 
                        and the hassle associated with buying or selling a used car.</p>
                </div>
                <div class="col-md-4">
                    <h5>Contact Info</h5>
                    <p><i class="fas fa-map-marker-alt"></i> 83F7+74H, Carmona, 4116 Cavite</p>
                    <p><i class="fas fa-phone"></i> (555) 123-4567</p>
                    <p><i class="fas fa-envelope"></i> info@autograph.com</p>
                </div>
                    <div class="col-md-2">
                    <h5>Operating Hours</h5>
                    <p><i class="fas fa-clock"></i> 8:30 AM to 6 PM (Monday - Saturday)</p>
                    <p><i class="fas fa-clock"></i> 9 AM-4 PM (Sunday)</p>
                </div>
            </div>

            <hr style="margin: 2rem 0 1rem; border-color: #444;">
            <div class="text-center">
                <p>&copy; 2025 Autograph. All rights reserved.</p>
            </div>
        </div>

    </footer>

    <!-- Car Details Modal -->
    <div class="modal fade" id="carDetailsModal" tabindex="-1" aria-labelledby="carDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="carDetailsModalLabel"></h5>
                </div>
                
                <div class="modal-body">
                    <!-- Image Gallery -->
                    <div id="carImageGallery" class="mb-3">
                        <div id="carouselImages" class="carousel slide" data-bs-ride="carousel">
                            <div class="carousel-inner" id="carouselInner"></div>
                            <button class="carousel-control-prev" type="button" data-bs-target="#carouselImages" data-bs-slide="prev">
                                <span class="carousel-control-prev-icon"></span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#carouselImages" data-bs-slide="next">
                                <span class="carousel-control-next-icon"></span>
                            </button>
                        </div>
                    </div>

                    <!-- Selling Price -->
                    <div class="alert alert-success text-center mb-4" style="font-size: 1.5rem; font-weight: bold;">
                        <i class="fas fa-tag"></i> SELLING PRICE: <span id="carSellingPrice"></span>
                    </div>

                    <!-- Vehicle Details -->
                    <h6 class="fw-bold text-primary mb-3"><i class="fas fa-info-circle"></i> Basic Information</h6>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <p><strong>Plate Number:</strong> <span id="carPlateNumber"></span></p>
                            <p><strong>Make:</strong> <span id="carMake"></span></p>
                            <p><strong>Model:</strong> <span id="carModel"></span></p>
                            <p><strong>Variant:</strong> <span id="carVariant"></span></p>
                            <p><strong>Year:</strong> <span id="carYear"></span></p>
                            <p><strong>Color:</strong> <span id="carColor"></span></p>
                        </div>
                        <div class="col-md-6">
                            <p><strong>Body Type:</strong> <span id="carBodyType"></span></p>
                            <p><strong>Fuel Type:</strong> <span id="carFuelType"></span></p>
                            <p><strong>Transmission:</strong> <span id="carTransmission"></span></p>
                            <p><strong>Odometer/Mileage:</strong> <span id="carOdometer"></span></p>
                            <p><strong>Spare Key:</strong> <span id="carSpareKey"></span></p>
                        </div>
                    </div>

                    <h6 class="fw-bold text-primary mb-3"><i class="fas fa-clipboard-check"></i> Vehicle Condition</h6>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <p><strong>Spare Tires:</strong> <span id="carSpareTires"></span></p>
                            <p><strong>Complete Tools:</strong> <span id="carCompleteTools"></span></p>
                        </div>
                        <div class="col-md-6">
                            <p><strong>Original Plate:</strong> <span id="carOriginalPlate"></span></p>
                            <p><strong>Complete Documents:</strong> <span id="carCompleteDocuments"></span></p>
                        </div>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
    <script>
        // Global variables
        let allVehicles = [];
        let filteredVehicles = [];
        let currentPage = 1;
        const vehiclesPerPage = 6;
        let currentViewMode = 'grid';

        // Load Released Vehicles
        async function loadVehicles() {
            try {
                const response = await fetch('../AcquisitionPage/getReleasedVehicle.php');
                const data = await response.json();
                
                console.log('API Response:', data); 
                
                if (data.success && data.vehicles.length > 0) {
                    allVehicles = data.vehicles;
                    filteredVehicles = [...allVehicles];
                    
                    console.log('Loaded vehicles:', allVehicles); 
                    
                    // Load spotlight vehicle (first vehicle)
                    loadSpotlight();
                    
                    // Display vehicles
                    displayVehicles();
                } else {
document.getElementById('vehiclesContainer').innerHTML = 
    '<div class="empty-message">No vehicles available at the moment. Check back soon!</div>';

document.getElementById('spotlightContainer').innerHTML = 
    '<div class="empty-message">No featured vehicle available at the moment.</div>';

                }
            } catch (error) {
                console.error('Error loading vehicles:', error);
                document.getElementById('vehiclesContainer').innerHTML = 
                    '<div class="empty-message"><p>Error loading vehicles. Please try again later.</p></div>';
            }
        }

        // Load Spotlight Vehicle
        function loadSpotlight() {
            setTimeout(setupSpotlightGallery, 100);

            if (allVehicles.length === 0) return;
            
            const spotlightVehicle = allVehicles[0];
            
            // Handle photo path
            let photoPath = '/Pictures/placeholder-car.jpg';
            if (spotlightVehicle.exterior_photo) {
                // If the path already includes a folder structure
                if (spotlightVehicle.exterior_photo.includes('/')) {
                    photoPath = `../uploads/${spotlightVehicle.exterior_photo}`;
                } else {
                    // Direct file in uploads folder
                    photoPath = `../uploads/${spotlightVehicle.exterior_photo}`;
                }
            }
            
            console.log('Spotlight photo path:', photoPath); 
            
            const sellingPrice = spotlightVehicle.selling_price 
                ? `₱${parseFloat(spotlightVehicle.selling_price).toLocaleString('en-PH', {minimumFractionDigits: 2, maximumFractionDigits: 2})}` 
                : 'Price on Request';
            
            const spotlightHTML = `
                <span class="spotlight-badge"><i class="fas fa-star"></i> Featured</span>
                <div class="spotlight-content">
                    <div class="spotlight-image">
                        <img src="${photoPath}" alt="${spotlightVehicle.model}" 
                             onerror="this.src='/Pictures/placeholder-car.jpg'">
                    </div>
                    <div class="spotlight-info">
                        <h3>${spotlightVehicle.make ? spotlightVehicle.make + ' ' : ''}${spotlightVehicle.model} ${spotlightVehicle.year}</h3>
                        ${spotlightVehicle.variant ? `<p class="text mb-2">${spotlightVehicle.variant}</p>` : ''}
                        <p class="spotlight-price">${sellingPrice}</p>
                        <div class="spotlight-details">
                            <div class="spotlight-detail-item">
                                <i class="fas fa-calendar"></i>
                                <span>${spotlightVehicle.year}</span>
                            </div>
                            <div class="spotlight-detail-item">
                                <i class="fas fa-palette"></i>
                                <span>${spotlightVehicle.color}</span>
                            </div>
                            <div class="spotlight-detail-item">
                                <i class="fas fa-tachometer-alt"></i>
                                <span id="spotlightOdometer"><?= $vehicle['odometer'] ? formatOdometer($vehicle['odometer']) : 'N/A' ?></span>
                            </div>
                            <div class="spotlight-detail-item">
                                <i class="fas fa-cog"></i>
                                <span>${spotlightVehicle.transmission || 'N/A'}</span>
                            </div>
                            <div class="spotlight-detail-item">
                                <i class="fas fa-gas-pump"></i>
                                <span>${spotlightVehicle.fuel_type || 'N/A'}</span>
                            </div>
                            <div class="spotlight-detail-item">
                                <i class="fas fa-check-circle"></i>
                                <span>Complete Document: ${spotlightVehicle.complete_documents}</span>
                            </div>
                        </div>
                        <div class="spotlight-actions">
                            <button class="btn btn-primary-custom" onclick='showVehicleDetails(${JSON.stringify(spotlightVehicle).replace(/'/g, "&apos;")})'>
                                <i class="fas fa-info-circle"></i> View Full Details
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('spotlightContainer').innerHTML = spotlightHTML;
        }

        // Display Vehicles with Pagination
        function displayVehicles() {
            const container = document.getElementById('vehiclesContainer');
            const start = (currentPage - 1) * vehiclesPerPage;
            const end = start + vehiclesPerPage;
            const vehiclesToShow = filteredVehicles.slice(start, end);
            
            if (vehiclesToShow.length === 0) {
                container.innerHTML = '<div class="empty-message"><p>No vehicles found matching your criteria.</p></div>';
                updatePagination();
                return;
            }
            
            container.innerHTML = '';
            
            vehiclesToShow.forEach(vehicle => {
                // Handle photo path
                let photoPath = '/Pictures/placeholder-car.jpg';
                if (vehicle.exterior_photo) {
                    if (vehicle.exterior_photo.includes('/')) {
                        photoPath = `../uploads/${vehicle.exterior_photo}`;
                    } else {
                        photoPath = `../uploads/${vehicle.exterior_photo}`;
                    }
                }
                
                const sellingPrice = vehicle.selling_price 
                    ? `₱${parseFloat(vehicle.selling_price).toLocaleString('en-PH', {minimumFractionDigits: 2, maximumFractionDigits: 2})}` 
                    : 'Price on Request';
                
                const cardHTML = `
                    <div class="car-card fade-in" onclick='showVehicleDetails(${JSON.stringify(vehicle).replace(/'/g, "&apos;")})' style="cursor: pointer;">
                        <div class="car-image">
                            <img src="${photoPath}" alt="${vehicle.model}" class="img-fluid" 
                                onerror="this.src='/Pictures/placeholder-car.jpg'">
                        </div>
                        <div class="car-info">
                            <h5>${vehicle.make ? vehicle.make + ' ' : ''}${vehicle.model} ${vehicle.year}</h5>
                            ${vehicle.variant ? `<p class="text-muted mb-1"><small>${vehicle.variant}</small></p>` : ''}
                            <p class="text-muted mb-1">${vehicle.color} | ${vehicle.transmission || 'N/A'}</p>
                            <p class="text-muted mb-2"><small><i class="fas fa-tachometer-alt"></i> ${vehicle.odometer ? formatOdometer(vehicle.odometer) : 'N/A'}</small></p>
                            <div class="d-flex justify-content-between align-items-center">
                                <span class="car-price">${sellingPrice}</span>
                                <span class="btn btn-sm btn-view-details">
                                    View Details
                                </span>
                            </div>
                        </div>
                    </div>
                `;
                
                container.insertAdjacentHTML('beforeend', cardHTML);
            });
            
            updatePagination();
        }

        // Update Pagination
        function updatePagination() {
            const totalPages = Math.ceil(filteredVehicles.length / vehiclesPerPage);
            document.getElementById('pageInfo').textContent = `Page ${currentPage} of ${totalPages}`;
            document.getElementById('prevBtn').disabled = currentPage === 1;
            document.getElementById('nextBtn').disabled = currentPage === totalPages || totalPages === 0;
        }

        // Change Page
        function changePage(direction) {
            const totalPages = Math.ceil(filteredVehicles.length / vehiclesPerPage);
            currentPage += direction;
            if (currentPage < 1) currentPage = 1;
            if (currentPage > totalPages) currentPage = totalPages;
            displayVehicles();
            document.getElementById('featured-vehicles').scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        // Set View Mode
        function setViewMode(mode) {
            currentViewMode = mode;
            const container = document.getElementById('vehiclesContainer');
            const gridBtn = document.getElementById('gridViewBtn');
            const listBtn = document.getElementById('listViewBtn');
            
            if (mode === 'grid') {
                container.classList.remove('list-view');
                container.classList.add('grid-view');
                gridBtn.classList.add('active');
                listBtn.classList.remove('active');
            } else {
                container.classList.remove('grid-view');
                container.classList.add('list-view');
                listBtn.classList.add('active');
                gridBtn.classList.remove('active');
            }
        }

        // Search and Filter
        document.getElementById('searchInput').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            filteredVehicles = allVehicles.filter(vehicle => 
                vehicle.model.toLowerCase().includes(searchTerm) ||
                vehicle.year.toString().includes(searchTerm) ||
                vehicle.color.toLowerCase().includes(searchTerm)
            );
            currentPage = 1;
            displayVehicles();
        });

        // Sort Vehicles
        document.getElementById('sortSelect').addEventListener('change', function(e) {
            const sortValue = e.target.value;
            
            switch(sortValue) {
                case 'price-low':
                    filteredVehicles.sort((a, b) => parseFloat(a.selling_price || 0) - parseFloat(b.selling_price || 0));
                    break;
                case 'price-high':
                    filteredVehicles.sort((a, b) => parseFloat(b.selling_price || 0) - parseFloat(a.selling_price || 0));
                    break;
                case 'year-new':
                    filteredVehicles.sort((a, b) => b.year - a.year);
                    break;
                case 'year-old':
                    filteredVehicles.sort((a, b) => a.year - b.year);
                    break;
                default:
                    filteredVehicles = [...allVehicles];
            }
            
            currentPage = 1;
            displayVehicles();
        });

        function showVehicleDetails(vehicle) {
            // Set modal title
            document.getElementById('carDetailsModalLabel').textContent = 
                `${vehicle.make ? vehicle.make + ' ' : ''}${vehicle.model} ${vehicle.year}${vehicle.variant ? ' ' + vehicle.variant : ''}`;
            
            // Set selling price
            const sellingPrice = vehicle.selling_price 
                ? `₱${parseFloat(vehicle.selling_price).toLocaleString('en-PH', {minimumFractionDigits: 2, maximumFractionDigits: 2})}` 
                : 'Contact us for pricing';
            document.getElementById('carSellingPrice').textContent = sellingPrice;
            
            // Set basic details
            document.getElementById('carPlateNumber').textContent = vehicle.masked_plate;
            document.getElementById('carMake').textContent = vehicle.make || 'N/A';
            document.getElementById('carModel').textContent = vehicle.model || 'N/A';
            document.getElementById('carVariant').textContent = vehicle.variant || 'N/A';
            document.getElementById('carYear').textContent = vehicle.year;
            document.getElementById('carColor').textContent = vehicle.color;
            document.getElementById('carBodyType').textContent = vehicle.body_type || 'N/A';
            document.getElementById('carFuelType').textContent = vehicle.fuel_type || 'N/A';
            document.getElementById('carTransmission').textContent = vehicle.transmission || 'N/A';
            document.getElementById('carOdometer').textContent = vehicle.odometer ? formatOdometer(vehicle.odometer) : 'N/A';
            document.getElementById('carSpareKey').textContent = vehicle.spare_key || 'N/A';
            document.getElementById('carSpareTires').textContent = vehicle.spare_tires;
            document.getElementById('carCompleteTools').textContent = vehicle.complete_tools;
            document.getElementById('carOriginalPlate').textContent = vehicle.original_plate;
            document.getElementById('carCompleteDocuments').textContent = vehicle.complete_documents;
            
            // Build image carousel
           const carouselInner = document.getElementById('carouselInner');
            carouselInner.innerHTML = '';
            
            const photos = [
                { path: vehicle.exterior_photo, label: 'Exterior' },
                { path: vehicle.dashboard_photo, label: 'Dashboard' },
                { path: vehicle.hood_photo, label: 'Hood/Engine' },
                { path: vehicle.interior_photo, label: 'Interior' },
                { path: vehicle.trunk_photo, label: 'Trunk' }
            ].filter(p => p.path && p.path.trim() !== '');
            
            // Add issue photos if available
            if (vehicle.issue_photos) {
                vehicle.issue_photos.forEach((issue, index) => {
                    if (issue.photo) {
                        photos.push({ 
                            path: issue.photo, 
                            label: `Issue: ${issue.name || 'Issue ' + (index + 1)}` 
                        });
                    }
                });
            }
            
            photos.forEach((photo, index) => {
                let photoPath = photo.path;
                if (photoPath && !photoPath.startsWith('../uploads/')) {
                    photoPath = `../uploads/${photoPath}`;
                }
                
                const item = document.createElement('div');
                item.className = `carousel-item ${index === 0 ? 'active' : ''}`;
                item.innerHTML = `
                    <img src="${photoPath}" class="d-block w-100 rounded" alt="${photo.label}"
                        onerror="this.src='/Pictures/placeholder-car.jpg'">
                    <div class="carousel-caption d-none d-md-block">
                        <h5>${photo.label}</h5>
                    </div>
                `;
                carouselInner.appendChild(item);
            });
            // Show modal
            const modal = new bootstrap.Modal(document.getElementById('carDetailsModal'));
            modal.show();
        }

        // Slideshow functionality
        let slideIndex = 0;
        const slides = document.querySelectorAll(".hero-slide");
        const indicators = document.querySelectorAll(".indicator");

        function showSlide(index) {
            slides.forEach((slide, i) => {
                slide.classList.remove("active");
                if (indicators[i]) indicators[i].classList.remove("active");
                if (i === index) {
                    slide.classList.add("active");
                    if (indicators[i]) indicators[i].classList.add("active");
                }
            });
            slideIndex = index;
        }

        function changeSlide(n) {
            let newIndex = (slideIndex + n + slides.length) % slides.length;
            showSlide(newIndex);
        }

        function currentSlide(n) {
            showSlide(n - 1);
        }

        // Smooth scrolling
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });

        // Animation on scroll
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver(function(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.animationDelay = '0s';
                    entry.target.style.animationPlayState = 'running';
                }
            });
        }, observerOptions);

        document.querySelectorAll('.fade-in, .slide-in-left, .slide-in-right').forEach(el => {
            el.style.animationPlayState = 'paused';
            observer.observe(el);
        });

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadVehicles();
            showSlide(0);
            
            // Auto-slide every 5 seconds
            setInterval(() => changeSlide(1), 5000);
        });

        function formatOdometer(odometer) {
        if (!odometer) return 'N/A';
        const odometerStr = odometer.toString();
        if (odometerStr.length <= 2) {
            return odometerStr + ' km';
        } else {
            return odometerStr.substring(0, 3) + '* km';
        }
}
function setupSpotlightGallery() {
    const spotlightImage = document.querySelector('.spotlight-image img');
    if (spotlightImage) {
        spotlightImage.style.cursor = 'pointer';
        spotlightImage.addEventListener('click', function() {
            const spotlightVehicle = allVehicles[0];
            if (spotlightVehicle) {
                showVehicleDetails(spotlightVehicle);
            }
        });
    }
}

    </script>
</body>
</html>